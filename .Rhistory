#Adding info from other tables #####################################################
#Adding the number of members of the household
load(here("Baseline_Survey/data/MENAGE.RData"))
menage <- menage %>% select(village_code = hh1,
household_number = hh2,
household_members = hh48)
moustiquaire = moustiquaire %>% left_join(menage,
by = c("village_code",
"household_number"))
#Adding household education
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
tableau_de_menage <- tableau_de_menage %>% filter(hl1 == 1) %>%
select(village_code = hh1,
household_number = hh2,
head_education = hl10,
head_education_level = hl11a) %>%
mutate(head_education_level = case_when(
head_education == "Non" ~ "Preschool or uneducated",
head_education == "Non reponse" ~ "DK / Missing",
head_education == "Oui" & head_education_level == "Pré-scolaire" ~ "Preschool or uneducated",
head_education == "Oui" & head_education_level == "Primaire" ~ "Primary",
head_education == "Oui" & head_education_level == "Secondaire 1" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Secondaire 2" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Superieur" ~ "Secondary +",
TRUE ~ "DK / Missing")
) %>%
select(-head_education)
moustiquaire = moustiquaire %>% left_join(tableau_de_menage,
by = c("village_code",
"household_number"))
#Creating table who splet under #####################################################
#Adding who slept under
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
sleep_with_net = tableau_de_menage %>%
select(village_code = hh1,
household_number = hh2,
line_number = hl1,
sex = hl4,
age = hl6) %>%
mutate(sex = fct_recode(sex,
"Male" = "Masculin",
"Female" = "Féminin"),
age = case_when(
age <= 4 ~ "0-4",
age <= 14 ~ "5-14",
age <= 34 ~ "15-34",
age <= 49 ~ "35-49",
age > 50 ~ "50+"),
age = factor(age,
levels=c("0-4",
"5-14",
"15-34",
"35-49",
"50+")
)
)
aux_moustiquaire <- moustiquaire %>%
select(village_code,
household_number,
bool_mosq_net,
cat_mosq_net_type,
contains("tn15_")) %>%
gather(key = "aux",
value = "line_number",
tn15_1:tn15_8) %>%
select(-"aux")
sleep_with_net = sleep_with_net %>% left_join(aux_moustiquaire,
by = c("village_code",
"household_number",
"line_number"))
rm(list = c("aux_moustiquaire","tableau_de_menage", "menage"))
library(tidyverse)
library(here)
rm(list=ls())
load(here("Baseline_Survey/data/MOUSTIQUAIRE.RData"))
library(tidyverse)
library(here)
rm(list=ls())
load(here("Baseline_Survey/data/MOUSTIQUAIRE.RData"))
# Administrative data #############################################################
moustiquaire <- moustiquaire %>% select(-contains(c("autre", "nr")))
moustiquaire <- moustiquaire %>% rename(interviewer = hh3,
village_code = hh1,
household_number = hh2,
reserve_section = hhstrate,
bool_mosq_net=tn1,
bool_mosq_net_reason_scared = tn17a,
bool_mosq_net_reason_fish = tn17b,
bool_mosq_net_reason_poultry = tn17c,
bool_mosq_net_reason_other = tn17x,
bool_mosq_otherway = tn18a,
numeric_mosq_net_number = tn2,
alpha_bool_mosq_otherway_spray = tna8ba,
alpha_bool_mosq_otherway_puddles = tn18bb,
alpha_bool_mosq_otherway_bushes = tn18bc,
alpha_bool_mosq_otherway_repell = tn18bd,
cat_mosq_net_months = tn4,
cat_mosq_net_type = tn5,
cat_mosq_net_source = tn10,
cat_mosq_net_source_other = tn12,
bool_mosq_net_sleep = tn13) %>%
select(-hh1a, -hh6, -hh6a,
-hh7, -hh7a, -hh8,
-hh8a, -hh9, -hh9a,
-tn11, -tn18b, -tn3, -tn14,
-tnln) %>%
mutate(cat_mosq_net_type = as.character(cat_mosq_net_type),
cat_mosq_net_type = case_when(cat_mosq_net_type == 'NON REPONSE' ~ "Any type of mosquito net",
cat_mosq_net_type == 'NSP MARQUE' ~ "Any type of mosquito net",
cat_mosq_net_type == 'AUTRE TYPE' ~ "Insecticide-treated mosquito net (ITN)",
cat_mosq_net_type == 'NSP MARQUE /TYPE' ~ "Insecticide-treated mosquito net (ITN)",
!is.na(cat_mosq_net_type) ~ "Insecticide-treated mosquito net (ITN)"),
cat_mosq_net_type = factor(cat_mosq_net_type,
levels=c("Insecticide-treated mosquito net (ITN)",
"Any type of mosquito net")),
cat_mosq_net_source = as.character(cat_mosq_net_source),
cat_mosq_net_source_other = as.character(cat_mosq_net_source_other),
cat_mosq_net_source = case_when(cat_mosq_net_source == "NON" ~ cat_mosq_net_source_other,
cat_mosq_net_source == "NSP" ~ cat_mosq_net_source_other,
TRUE ~ cat_mosq_net_source),
cat_mosq_net_source = case_when(cat_mosq_net_source == 'OUI, CAMPAGNE MID' ~ 'Mass distribution campaign',
cat_mosq_net_source == 'OUI, CPN' ~ 'Prenatal care visit',
cat_mosq_net_source == 'OUI, VACCINATION' ~ 'Vaccination visit',
cat_mosq_net_source == 'CENTRE DE SANTE PUBLIC' ~ 'Health facility-Government',
cat_mosq_net_source == 'CENTRE DE SANTE PRIVE' ~ 'Health facility-Private',
cat_mosq_net_source == 'BOUTIQUE / MARCHE / RUE' ~ 'Shop / Market / Street',
cat_mosq_net_source == 'AGENT DE SANTE COMMUNAUTAIRE' ~ 'Community health worker',
cat_mosq_net_source == 'AUTRE' ~ 'Other',
cat_mosq_net_source == 'NSP' ~ 'DK / Missing'),
cat_mosq_net_source = factor(cat_mosq_net_source,
levels = c('Mass distribution campaign',
'Prenatal care visit',
'Vaccination visit',
'Health facility-Government',
'Health facility-Private',
'Shop / Market / Street',
'Community health worker',
'Other',
'DK / Missing'))
) %>%
select(-cat_mosq_net_source_other)
moustiquaire = moustiquaire %>% mutate_at(.vars=vars(starts_with("bool_")),
~ifelse(grepl('NON', ., ignore.case=TRUE), 0, 1))
moustiquaire = moustiquaire %>% mutate_at(.vars=vars(starts_with("alpha_")),
~ifelse(grepl('', .), 0, 1))
moustiquaire$numeric_mosq_net_number <- as.numeric(as.character(moustiquaire$numeric_mosq_net_number))
#Adding info from other tables #####################################################
#Adding the number of members of the household
load(here("Baseline_Survey/data/MENAGE.RData"))
menage <- menage %>% select(village_code = hh1,
household_number = hh2,
household_members = hh48)
moustiquaire = moustiquaire %>% left_join(menage,
by = c("village_code",
"household_number"))
#Adding household education
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
tableau_de_menage <- tableau_de_menage %>% filter(hl1 == 1) %>%
select(village_code = hh1,
household_number = hh2,
head_education = hl10,
head_education_level = hl11a) %>%
mutate(head_education_level = case_when(
head_education == "Non" ~ "Preschool or uneducated",
head_education == "Non reponse" ~ "DK / Missing",
head_education == "Oui" & head_education_level == "Pré-scolaire" ~ "Preschool or uneducated",
head_education == "Oui" & head_education_level == "Primaire" ~ "Primary",
head_education == "Oui" & head_education_level == "Secondaire 1" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Secondaire 2" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Superieur" ~ "Secondary +",
TRUE ~ "DK / Missing")
) %>%
select(-head_education)
moustiquaire = moustiquaire %>% left_join(tableau_de_menage,
by = c("village_code",
"household_number"))
#Creating table who splet under #####################################################
#Adding who slept under
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
sleep_with_net = tableau_de_menage %>%
select(village_code = hh1,
household_number = hh2,
line_number = hl1,
sex = hl4,
age = hl6) %>%
mutate(sex = fct_recode(sex,
"Male" = "Masculin",
"Female" = "Féminin"),
age = case_when(
age <= 4 ~ "0-4",
age <= 14 ~ "5-14",
age <= 34 ~ "15-34",
age <= 49 ~ "35-49",
age > 50 ~ "50+"),
age = factor(age,
levels=c("0-4",
"5-14",
"15-34",
"35-49",
"50+")
)
)
aux_moustiquaire <- moustiquaire %>%
select(village_code,
household_number,
bool_mosq_net,
cat_mosq_net_type,
contains("tn15_")) %>%
gather(key = "aux",
value = "line_number",
tn15_1:tn15_8) %>%
select(-"aux")
sleep_with_net = sleep_with_net %>% left_join(aux_moustiquaire,
by = c("village_code",
"household_number",
"line_number"))
rm(list = c("aux_moustiquaire","tableau_de_menage", "menage"))
#change the cats ################################################################
moustiquaire_cats = moustiquaire %>% count(reserve_section, village_code, cat_mosq_net_source_other, sort = TRUE)
moustiquaire_cats = moustiquaire_cats %>% rename(mosq_net_source_other = n)
moustiquaire_cats = reshape(moustiquaire_cats, idvar = c("reserve_section", "village_code"), timevar="cat_mosq_net_source", direction = "wide")
library(tidyverse)
library(here)
rm(list=ls())
load(here("Baseline_Survey/data/MOUSTIQUAIRE.RData"))
# Administrative data #############################################################
moustiquaire <- moustiquaire %>% select(-contains(c("autre", "nr")))
moustiquaire <- moustiquaire %>% rename(interviewer = hh3,
village_code = hh1,
household_number = hh2,
reserve_section = hhstrate,
bool_mosq_net=tn1,
bool_mosq_net_reason_scared = tn17a,
bool_mosq_net_reason_fish = tn17b,
bool_mosq_net_reason_poultry = tn17c,
bool_mosq_net_reason_other = tn17x,
bool_mosq_otherway = tn18a,
numeric_mosq_net_number = tn2,
alpha_bool_mosq_otherway_spray = tna8ba,
alpha_bool_mosq_otherway_puddles = tn18bb,
alpha_bool_mosq_otherway_bushes = tn18bc,
alpha_bool_mosq_otherway_repell = tn18bd,
cat_mosq_net_months = tn4,
cat_mosq_net_type = tn5,
cat_mosq_net_source = tn10,
cat_mosq_net_source_other = tn12,
bool_mosq_net_sleep = tn13) %>%
select(-hh1a, -hh6, -hh6a,
-hh7, -hh7a, -hh8,
-hh8a, -hh9, -hh9a,
-tn11, -tn18b, -tn3, -tn14,
-tnln) %>%
mutate(cat_mosq_net_type = as.character(cat_mosq_net_type),
cat_mosq_net_type = case_when(cat_mosq_net_type == 'NON REPONSE' ~ "Any type of mosquito net",
cat_mosq_net_type == 'NSP MARQUE' ~ "Any type of mosquito net",
cat_mosq_net_type == 'AUTRE TYPE' ~ "Insecticide-treated mosquito net (ITN)",
cat_mosq_net_type == 'NSP MARQUE /TYPE' ~ "Insecticide-treated mosquito net (ITN)",
!is.na(cat_mosq_net_type) ~ "Insecticide-treated mosquito net (ITN)"),
cat_mosq_net_type = factor(cat_mosq_net_type,
levels=c("Insecticide-treated mosquito net (ITN)",
"Any type of mosquito net")),
cat_mosq_net_source = as.character(cat_mosq_net_source),
cat_mosq_net_source_other = as.character(cat_mosq_net_source_other),
cat_mosq_net_source = case_when(cat_mosq_net_source == "NON" ~ cat_mosq_net_source_other,
cat_mosq_net_source == "NSP" ~ cat_mosq_net_source_other,
TRUE ~ cat_mosq_net_source),
cat_mosq_net_source = case_when(cat_mosq_net_source == 'OUI, CAMPAGNE MID' ~ 'Mass distribution campaign',
cat_mosq_net_source == 'OUI, CPN' ~ 'Prenatal care visit',
cat_mosq_net_source == 'OUI, VACCINATION' ~ 'Vaccination visit',
cat_mosq_net_source == 'CENTRE DE SANTE PUBLIC' ~ 'Health facility-Government',
cat_mosq_net_source == 'CENTRE DE SANTE PRIVE' ~ 'Health facility-Private',
cat_mosq_net_source == 'BOUTIQUE / MARCHE / RUE' ~ 'Shop / Market / Street',
cat_mosq_net_source == 'AGENT DE SANTE COMMUNAUTAIRE' ~ 'Community health worker',
cat_mosq_net_source == 'AUTRE' ~ 'Other',
cat_mosq_net_source == 'NSP' ~ 'DK / Missing'),
cat_mosq_net_source = factor(cat_mosq_net_source,
levels = c('Mass distribution campaign',
'Prenatal care visit',
'Vaccination visit',
'Health facility-Government',
'Health facility-Private',
'Shop / Market / Street',
'Community health worker',
'Other',
'DK / Missing'))
) %>%
select(-cat_mosq_net_source_other)
moustiquaire = moustiquaire %>% mutate_at(.vars=vars(starts_with("bool_")),
~ifelse(grepl('NON', ., ignore.case=TRUE), 0, 1))
moustiquaire = moustiquaire %>% mutate_at(.vars=vars(starts_with("alpha_")),
~ifelse(grepl('', .), 0, 1))
moustiquaire$numeric_mosq_net_number <- as.numeric(as.character(moustiquaire$numeric_mosq_net_number))
#Adding info from other tables #####################################################
#Adding the number of members of the household
load(here("Baseline_Survey/data/MENAGE.RData"))
menage <- menage %>% select(village_code = hh1,
household_number = hh2,
household_members = hh48)
moustiquaire = moustiquaire %>% left_join(menage,
by = c("village_code",
"household_number"))
#Adding household education
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
tableau_de_menage <- tableau_de_menage %>% filter(hl1 == 1) %>%
select(village_code = hh1,
household_number = hh2,
head_education = hl10,
head_education_level = hl11a) %>%
mutate(head_education_level = case_when(
head_education == "Non" ~ "Preschool or uneducated",
head_education == "Non reponse" ~ "DK / Missing",
head_education == "Oui" & head_education_level == "Pré-scolaire" ~ "Preschool or uneducated",
head_education == "Oui" & head_education_level == "Primaire" ~ "Primary",
head_education == "Oui" & head_education_level == "Secondaire 1" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Secondaire 2" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Superieur" ~ "Secondary +",
TRUE ~ "DK / Missing")
) %>%
select(-head_education)
moustiquaire = moustiquaire %>% left_join(tableau_de_menage,
by = c("village_code",
"household_number"))
#Creating table who splet under #####################################################
#Adding who slept under
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
sleep_with_net = tableau_de_menage %>%
select(village_code = hh1,
household_number = hh2,
line_number = hl1,
sex = hl4,
age = hl6) %>%
mutate(sex = fct_recode(sex,
"Male" = "Masculin",
"Female" = "Féminin"),
age = case_when(
age <= 4 ~ "0-4",
age <= 14 ~ "5-14",
age <= 34 ~ "15-34",
age <= 49 ~ "35-49",
age > 50 ~ "50+"),
age = factor(age,
levels=c("0-4",
"5-14",
"15-34",
"35-49",
"50+")
)
)
aux_moustiquaire <- moustiquaire %>%
select(village_code,
household_number,
bool_mosq_net,
cat_mosq_net_type,
contains("tn15_")) %>%
gather(key = "aux",
value = "line_number",
tn15_1:tn15_8) %>%
select(-"aux")
sleep_with_net = sleep_with_net %>% left_join(aux_moustiquaire,
by = c("village_code",
"household_number",
"line_number"))
rm(list = c("aux_moustiquaire","tableau_de_menage", "menage"))
setwd("C:/Github/health-in-harmony-baseline-/Baseline_Survey/preprocessing")
setwd("C:/Github/health-in-harmony-baseline-/Baseline_Survey/preprocessing")
setwd("C:/Github/health-in-harmony-baseline-")
library(tidyverse)
library(here)
rm(list=ls())
load(here("Baseline_Survey/data/MOUSTIQUAIRE.RData"))
# Administrative data #############################################################
moustiquaire <- moustiquaire %>% select(-contains(c("autre", "nr")))
moustiquaire <- moustiquaire %>% rename(interviewer = hh3,
village_code = hh1,
household_number = hh2,
reserve_section = hhstrate,
bool_mosq_net=tn1,
bool_mosq_net_reason_scared = tn17a,
bool_mosq_net_reason_fish = tn17b,
bool_mosq_net_reason_poultry = tn17c,
bool_mosq_net_reason_other = tn17x,
bool_mosq_otherway = tn18a,
numeric_mosq_net_number = tn2,
alpha_bool_mosq_otherway_spray = tna8ba,
alpha_bool_mosq_otherway_puddles = tn18bb,
alpha_bool_mosq_otherway_bushes = tn18bc,
alpha_bool_mosq_otherway_repell = tn18bd,
cat_mosq_net_months = tn4,
cat_mosq_net_type = tn5,
cat_mosq_net_source = tn10,
cat_mosq_net_source_other = tn12,
bool_mosq_net_sleep = tn13) %>%
select(-hh1a, -hh6, -hh6a,
-hh7, -hh7a, -hh8,
-hh8a, -hh9, -hh9a,
-tn11, -tn18b, -tn3, -tn14,
-tnln) %>%
mutate(cat_mosq_net_type = as.character(cat_mosq_net_type),
cat_mosq_net_type = case_when(cat_mosq_net_type == 'NON REPONSE' ~ "Any type of mosquito net",
cat_mosq_net_type == 'NSP MARQUE' ~ "Any type of mosquito net",
cat_mosq_net_type == 'AUTRE TYPE' ~ "Insecticide-treated mosquito net (ITN)",
cat_mosq_net_type == 'NSP MARQUE /TYPE' ~ "Insecticide-treated mosquito net (ITN)",
!is.na(cat_mosq_net_type) ~ "Insecticide-treated mosquito net (ITN)"),
cat_mosq_net_type = factor(cat_mosq_net_type,
levels=c("Insecticide-treated mosquito net (ITN)",
"Any type of mosquito net")),
cat_mosq_net_source = as.character(cat_mosq_net_source),
cat_mosq_net_source_other = as.character(cat_mosq_net_source_other),
cat_mosq_net_source = case_when(cat_mosq_net_source == "NON" ~ cat_mosq_net_source_other,
cat_mosq_net_source == "NSP" ~ cat_mosq_net_source_other,
TRUE ~ cat_mosq_net_source),
cat_mosq_net_source = case_when(cat_mosq_net_source == 'OUI, CAMPAGNE MID' ~ 'Mass distribution campaign',
cat_mosq_net_source == 'OUI, CPN' ~ 'Prenatal care visit',
cat_mosq_net_source == 'OUI, VACCINATION' ~ 'Vaccination visit',
cat_mosq_net_source == 'CENTRE DE SANTE PUBLIC' ~ 'Health facility-Government',
cat_mosq_net_source == 'CENTRE DE SANTE PRIVE' ~ 'Health facility-Private',
cat_mosq_net_source == 'BOUTIQUE / MARCHE / RUE' ~ 'Shop / Market / Street',
cat_mosq_net_source == 'AGENT DE SANTE COMMUNAUTAIRE' ~ 'Community health worker',
cat_mosq_net_source == 'AUTRE' ~ 'Other',
cat_mosq_net_source == 'NSP' ~ 'DK / Missing'),
cat_mosq_net_source = factor(cat_mosq_net_source,
levels = c('Mass distribution campaign',
'Prenatal care visit',
'Vaccination visit',
'Health facility-Government',
'Health facility-Private',
'Shop / Market / Street',
'Community health worker',
'Other',
'DK / Missing'))
) %>%
select(-cat_mosq_net_source_other)
moustiquaire = moustiquaire %>% mutate_at(.vars=vars(starts_with("bool_")),
~ifelse(grepl('NON', ., ignore.case=TRUE), 0, 1))
moustiquaire = moustiquaire %>% mutate_at(.vars=vars(starts_with("alpha_")),
~ifelse(grepl('', .), 0, 1))
moustiquaire$numeric_mosq_net_number <- as.numeric(as.character(moustiquaire$numeric_mosq_net_number))
#Adding info from other tables #####################################################
#Adding the number of members of the household
load(here("Baseline_Survey/data/MENAGE.RData"))
menage <- menage %>% select(village_code = hh1,
household_number = hh2,
household_members = hh48)
moustiquaire = moustiquaire %>% left_join(menage,
by = c("village_code",
"household_number"))
#Adding household education
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
tableau_de_menage <- tableau_de_menage %>% filter(hl1 == 1) %>%
select(village_code = hh1,
household_number = hh2,
head_education = hl10,
head_education_level = hl11a) %>%
mutate(head_education_level = case_when(
head_education == "Non" ~ "Preschool or uneducated",
head_education == "Non reponse" ~ "DK / Missing",
head_education == "Oui" & head_education_level == "Pré-scolaire" ~ "Preschool or uneducated",
head_education == "Oui" & head_education_level == "Primaire" ~ "Primary",
head_education == "Oui" & head_education_level == "Secondaire 1" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Secondaire 2" ~ "Secondary +",
head_education == "Oui" & head_education_level == "Superieur" ~ "Secondary +",
TRUE ~ "DK / Missing")
) %>%
select(-head_education)
moustiquaire = moustiquaire %>% left_join(tableau_de_menage,
by = c("village_code",
"household_number"))
#Creating table who splet under #####################################################
#Adding who slept under
load(here("Baseline_Survey/data/TABLEAU_DE_MENAGE.RData"))
sleep_with_net = tableau_de_menage %>%
select(village_code = hh1,
household_number = hh2,
line_number = hl1,
sex = hl4,
age = hl6) %>%
mutate(sex = fct_recode(sex,
"Male" = "Masculin",
"Female" = "Féminin"),
age = case_when(
age <= 4 ~ "0-4",
age <= 14 ~ "5-14",
age <= 34 ~ "15-34",
age <= 49 ~ "35-49",
age > 50 ~ "50+"),
age = factor(age,
levels=c("0-4",
"5-14",
"15-34",
"35-49",
"50+")
)
)
aux_moustiquaire <- moustiquaire %>%
select(village_code,
household_number,
bool_mosq_net,
cat_mosq_net_type,
contains("tn15_")) %>%
gather(key = "aux",
value = "line_number",
tn15_1:tn15_8) %>%
select(-"aux")
sleep_with_net = sleep_with_net %>% left_join(aux_moustiquaire,
by = c("village_code",
"household_number",
"line_number"))
rm(list = c("aux_moustiquaire","tableau_de_menage", "menage"))
library(tidyverse)
library(here)
rm(list=ls())
load(here("Baseline_Survey/data/MOUSTIQUAIRE.RData"))
